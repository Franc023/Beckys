<div class="product-form-container">
  <h1>Crear Nuevo Producto</h1>

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Nombre del Producto</label>
      <input type="text" id="name" formControlName="name" class="form-control"
        [class.is-invalid]="productForm.get('name')?.invalid && productForm.get('name')?.touched">
      <div class="error-message" *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched">
        El nombre del producto es requerido
      </div>
    </div>

    <div class="form-group">
      <label for="season">Temporada</label>
      <input type="text" id="season" formControlName="season" class="form-control"
        [class.is-invalid]="productForm.get('season')?.invalid && productForm.get('season')?.touched">
      <div class="error-message" *ngIf="productForm.get('season')?.invalid && productForm.get('season')?.touched">
        La temporada es requerida
      </div>
    </div>

    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea id="description" formControlName="description" rows="3" class="form-control"
        [class.is-invalid]="productForm.get('description')?.invalid && productForm.get('description')?.touched"></textarea>
      <div class="error-message"
        *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched">
        La descripción es requerida
      </div>
    </div>

    <div class="form-group">
      <label for="price">Precio</label>
      <div class="price-input">
        <span class="currency-symbol">$</span>
        <input type="number" id="price" formControlName="price" class="form-control"
          [class.is-invalid]="productForm.get('price')?.invalid && productForm.get('price')?.touched" step="0.01" min="0">
      </div>
      <div class="error-message" *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched">
        El precio es requerido y debe ser mayor a 0
      </div>
    </div>

    <div class="form-group">
      <label for="stock">Stock</label>
      <input type="number" id="stock" formControlName="stock" class="form-control"
        [class.is-invalid]="productForm.get('stock')?.invalid && productForm.get('stock')?.touched" min="0">
      <div class="error-message" *ngIf="productForm.get('stock')?.invalid && productForm.get('stock')?.touched">
        El stock es requerido y debe ser mayor a 0
      </div>
    </div>

    <div class="form-group">
      <label for="category">Categoría</label>
      <input type="text" id="category" formControlName="category" class="form-control"
        [class.is-invalid]="productForm.get('category')?.invalid && productForm.get('category')?.touched">
      <div class="error-message" *ngIf="productForm.get('category')?.invalid && productForm.get('category')?.touched">
        La categoría es requerida
      </div>
    </div>

    <div class="form-group">
      <label for="image">Imagen del Producto</label>
      <div class="image-upload-container">
        <label for="image" class="image-upload-label">
          <span class="upload-icon">+</span>
          <span>Seleccionar Imagen</span>
        </label>
        <input type="file" id="image" (change)="onFileSelected($event)" accept="image/*" class="image-input">
        
        <div class="image-preview-container" *ngIf="imagePreview">
          <img [src]="imagePreview" alt="Vista previa" class="image-preview">
        </div>
      </div>
      <div class="error-message" *ngIf="!selectedFile && productForm.touched">
        La imagen es requerida
      </div>
    </div>

    <button type="submit" class="submit-button" [disabled]="productForm.invalid || !selectedFile">
      Guardar Producto
    </button>

    <div class="back-link">
      <a routerLink="/">Regresar al dashboard</a>
    </div>
  </form>

  <div class="response-container" *ngIf="showResponse" [class.success]="isSuccess" [class.error]="!isSuccess">
    {{ responseMessage }}
  </div>
</div>
